# 規劃與分階段

## 使用 planning-with-files

**複雜任務（3+ 步驟）必須先建立計畫檔案，使用 `/plan` 或 `/planning-with-files` 啟動。**

系統會在專案根目錄建立三個檔案：

| 檔案 | 用途 | 更新時機 |
|------|------|---------|
| `task_plan.md` | 階段追蹤、進度、決策 | 每個階段完成後 |
| `findings.md` | 研究發現、技術筆記 | 任何發現後立即記錄 |
| `progress.md` | 會話日誌、測試結果 | 整個過程中持續更新 |

## 關鍵規則

- 開始前先建立計畫（非商量餘地）
- 每 2 次搜尋/瀏覽操作後，立即將關鍵發現寫入檔案
- 做重大決策前，重新讀取計畫檔案（刷新注意力窗口中的目標）
- 完成每個階段後更新狀態、記錄錯誤、標註修改的檔案
- 所有錯誤都記錄到計畫檔案中

## 決策框架

當多個方案都可行時，按以下優先順序選擇：

1. **可測試性** — 容易寫測試嗎？
2. **可讀性** — 6 個月後還看得懂嗎？
3. **一致性** — 符合專案既有模式嗎？
4. **簡潔性** — 這是最簡單的可行方案嗎？
5. **可逆性** — 之後改起來難不難？

## 學習 Codebase

進入新專案或實作新功能前：
- 找到 3 個類似的功能/元件
- 識別共通模式與慣例
- 優先使用相同的庫/工具
- 遵循既有的測試模式
- 不要無充分理由引入新工具
