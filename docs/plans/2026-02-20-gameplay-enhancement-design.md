# 關卡挑戰性與玩法深度強化設計

> 日期：2026-02-20
> 狀態：設計完成，待實作規劃
> 目標：讓每場戰鬥都有獨特的「解題感」，從「射怪物看 AI 打」進化為「讀地形、佈陷阱、算角度、虐英雄」

---

## 設計核心理念

玩家是地城之王。英雄來送死。

遊戲的爽感來自「我精心設計的殺陣把英雄碾壓了」。為了實現這個感覺，需要三個支柱：

1. **陷阱系統** — 戰前佈置，跟怪物能力產生位置化學反應
2. **關卡地形** — 每個房間都是獨特的戰術拼圖
3. **地城核心** — 可選挑戰目標，量化你的佈陣水準

---

## 一、陷阱系統

### 設計原則

陷阱的價值不在於「放了就會傷敵人」，而在於「搭配怪物能力把敵人趕進陷阱」。這是位置觸發型互動：食人魔嘲諷把敵人拉進沼澤、骷髏兵推擊把敵人撞進尖刺堆。

### 陷阱類型

| 陷阱 | 類型 | 效果 | 怪物化學反應 |
|------|------|------|-------------|
| 尖刺地板 | 一次性傷害 | 踩到的敵人受到固定傷害 | 食人魔嘲諷把敵人群聚到尖刺上 |
| 減速沼澤 | 持續區域 | 區域內敵人持續減速 | 骷髏兵推擊把敵人推進沼澤，動彈不得被遠程射爆 |
| 彈跳板 | 一次性位移 | 踩到的單位被彈飛到指定方向 | 把敵人彈進尖刺堆；或把自己怪物彈到有利位置 |
| 弱化圖騰 | 持續區域 | 範圍內敵人防禦降低 | 配合哥布林高攻速瘋狂輸出 |
| 警報鈴 | 一次性觸發 | 敵人踩到後附近我方怪物獲得短暫攻速提升 | 放在敵人必經之路，觸發後全隊狂暴 |

### 陷阱經濟

- 全部用金幣在商店購買（無免費配額）
- 金幣來源：擊殺英雄掠奪
- 金幣隨房間擴增自然累積，形成「前期窮、後期富」的節奏
- 陷阱可賣回，回收部分金額（用於同一房間多場戰鬥時重新佈陣）

### 戰前佈陣流程

```
進入房間
  |
【偵察】（2-3 秒）
  看到地形、核心位置、敵人入口方向、發射台位置
  |
【佈陣】（無時間限制，按「開戰」結束）
  從陷阱庫存拖放到房間空地
  可賣掉上一場留下的舊陷阱（回收部分金額）
  |
【開戰】
```

---

## 二、關卡地形系統

### 設計原則

每個房間是一張獨特的「戰術拼圖」。地形影響敵人行走路線、陷阱放置策略、怪物彈射反彈路徑。

### 地形元素

| 類型 | 例子 | 戰鬥影響 |
|------|------|---------|
| 障礙物（不可穿越） | 石柱、牆壁殘骸 | 擋住敵人直線前進，迫使繞路。怪物飛行時反彈。可製造「殺戮走廊」 |
| 可破壞物（有血量） | 木箱、腐朽柵門 | 英雄花時間打破，幫你爭取時間。我方怪物衝撞也能破壞，注意發射角度 |
| 地形效果區（持續性） | 積水區、裂縫地帶 | 積水配減速沼澤效果加大。裂縫地帶全員移速降低 |
| 地城核心 | 魔法水晶 | 每房間一個，有血量。英雄會分兵攻擊 |

### 關卡佈局範例

- **窄道關**：兩排石柱形成 S 形通道，陷阱放在彎道上效果最好
- **開闊關**：大空地，四角有可破壞木箱，可選擇保留製造瓶頸或撞碎開路
- **分岔關**：兩條路通向核心，敵人分兵，考驗雙線防守
- **中央堡壘關**：核心在中央被牆圍住只有兩個缺口，好守但一旦突破很危險

### 發射台作為關卡變數

發射台位置由關卡佈局決定，不再固定：

| 配置 | 戰術影響 |
|------|---------|
| 經典雙台（左下+右下） | 基本款，兩側交叉火力 |
| 單台關卡 | 壓力大、角度受限，更依賴陷阱佈局 |
| 對角配置（左上+右下） | 可包夾但一台靠近敵人入口，風險高 |
| 三台關卡（稀有） | 火力充沛但可能陷阱槽位較少 |
| 移動式發射台 | 在軌道上緩慢移動，需抓準時機發射 |

### 核心公式

**每關的獨特性 = 地形形狀 x 發射台位置 x 敵人入口方向**

同一張地形，發射台換個位置就是完全不同的關卡體驗。

---

## 三、地城核心

### 設計原則

核心是「你有多厲害」的量尺，不是懲罰機制。被摧毀不會輸，但守住會有額外獎勵。

### 機制

- 每個房間有一顆魔法水晶，位置由關卡佈局決定
- 水晶有血量但不反擊
- 約 60-70% 英雄追打怪物，30-40% 會嘗試繞路攻擊水晶
- 同一房間打多場時，水晶血量不恢復，累積損傷

### 獎勵層級（一局結算）

| 守住水晶數 | 獎勵 |
|-----------|------|
| 0-1 個 | 無額外獎勵（正常通關） |
| 2-3 個 | 金幣加成（+30%） |
| 4 個 | 金幣加成 + 房間選擇多一個（3 選 1 → 4 選 1） |
| 全部守住 | 金幣加成 + 多一個選擇 + 稀有陷阱獎勵 |

### 風險/報酬

玩家可在同一房間打多場戰鬥（選不同破牆方向）：
- 更多戰鬥 = 更多金幣和經驗
- 但核心累積受損、被摧毀風險上升
- 舊陷阱可能位置不對（敵人方向變了），需賣掉重佈（損失金幣）

---

## 四、敵人多樣化

### 新增英雄類型

| 英雄 | 特性 | 玩家應對 |
|------|------|---------|
| 冒險者（現有） | 普通近戰，直線追打 | 基本款，陷阱隨便放都有效 |
| 聖騎士（現有） | 高血高攻 | 需集火或多陷阱疊加 |
| 盜賊（新增） | 速度快、50% 機率閃避單格陷阱、優先奔向水晶 | 需區域型陷阱（沼澤）或嘲諷強制拉回 |
| 牧師（新增） | 治療附近受傷英雄、自身血量低 | 必須優先擊殺，用彈跳板彈離隊伍或哥布林暗殺 |

### 設計邏輯

每種英雄都在「破壞玩家某個策略」：
- 盜賊破壞「放陷阱擋路」 → 需要區域控制
- 牧師破壞「慢慢消耗」 → 需要集中火力

### 出場規則

- 第 1-2 房：純冒險者（學習期）
- 第 3 房：加入盜賊或牧師
- 第 4-5 房：混合編隊（聖騎士 + 盜賊 + 牧師）

---

## 五、難度曲線（一局 5 房）

| 房間 | 敵人 | 地形 | 玩家狀態 | 設計意圖 |
|------|------|------|---------|---------|
| 第 1 房 | 純冒險者，2 波 | 簡單地形，好打的發射台位置 | 起始金 200、起始怪物 | 學習：熟悉發射 + 放陷阱 |
| 第 2 房 | 冒險者增多，3 波 | 出現障礙物 | 累積金幣 + 1 個房間獎勵 | 適應：感受地形影響策略 |
| 第 3 房 | 加入盜賊或牧師 | 更複雜，可能有可破壞物 | 金幣漸多，陷阱選擇豐富 | 轉折：新敵人逼你調整打法 |
| 第 4 房 | 混合編隊 + 聖騎士 | 發射台位置不利，核心難守 | 已有 3 個房間加成 | 壓力：真正挑戰開始 |
| 第 5 房 | 全員出動，波次多 | 最刁鑽地形 | 全部資源就緒 | 決戰：把所有積累用上 |

### 每場之間的決策點

戰後結算 → 怪物升級/進化 → 選房間獎勵 → 商店買陷阱和消耗品 → 選下一扇門（或留在同一房間再打） → 看地形 → 佈陣 → 開打

每個環節都有一個小決策，但都很快（幾秒鐘），不拖慢節奏。目標一局 3-5 分鐘。

---

## 六、不變的系統

以下系統維持現狀，不在本次改動範圍：

- 怪物發射物理機制（反彈、衝撞、貫穿）
- 三種基礎怪物 + 各自 2 條進化路線
- 戰鬥中 AI 自動戰鬥
- 經驗累積與進化選擇
- 房間獎勵核心循環（寶藏室/訓練場/養雞場）

---

## 七、改動的現有系統

| 系統 | 改動內容 |
|------|---------|
| 商店 | 從「消耗品」擴充為「戰備商店」（陷阱 + 治療 + 增援令 + 強化水晶） |
| 戰鬥流程 | 新增偵察 → 佈陣階段 |
| 房間機制 | 同一房間可多場戰鬥，陷阱持續存在可賣回 |
| 房間獎勵 | 可能新增「工坊」類型（每場基礎陷阱配額 +1 或陷阱效果增強） |
| 關卡生成 | 需要關卡佈局系統（地形 + 發射台 + 核心位置） |
